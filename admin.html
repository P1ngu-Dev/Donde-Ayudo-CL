<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - Donde Ayudo CL</title>
  <meta name="robots" content="noindex, nofollow">
  <link rel="icon" type="image/svg+xml" href="/icons/icon.svg">
  
  <!-- Styles -->
  <style>
    *, *::before, *::after { box-sizing: border-box; }
    
    :root {
      --primary: #1E40AF;
      --primary-dark: #1E3A8A;
      --primary-light: #3B82F6;
      --success: #059669;
      --warning: #D97706;
      --danger: #DC2626;
      --gray-50: #F9FAFB;
      --gray-100: #F3F4F6;
      --gray-200: #E5E7EB;
      --gray-300: #D1D5DB;
      --gray-400: #9CA3AF;
      --gray-500: #6B7280;
      --gray-600: #4B5563;
      --gray-700: #374151;
      --gray-800: #1F2937;
      --gray-900: #111827;
    }
    
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      min-height: 100vh;
    }
    
    /* Login Page */
    .login-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }
    
    .login-card {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      width: 100%;
      max-width: 420px;
      overflow: hidden;
    }
    
    .login-header {
      background: var(--primary);
      padding: 2rem;
      text-align: center;
      color: white;
    }
    
    .login-header h1 {
      margin: 0 0 0.5rem;
      font-size: 1.5rem;
      font-weight: 700;
    }
    
    .login-header p {
      margin: 0;
      opacity: 0.9;
      font-size: 0.875rem;
    }
    
    .login-logo {
      width: 64px;
      height: 64px;
      margin: 0 auto 1rem;
      background: white;
      border-radius: 50%;
      padding: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .login-logo svg {
      width: 100%;
      height: 100%;
    }
    
    .login-form {
      padding: 2rem;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--gray-700);
      font-size: 0.875rem;
    }
    
    .form-input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid var(--gray-200);
      border-radius: 0.5rem;
      font-size: 1rem;
      transition: all 0.2s;
      background: var(--gray-50);
    }
    
    .form-input:focus {
      outline: none;
      border-color: var(--primary-light);
      background: white;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .form-input::placeholder {
      color: var(--gray-400);
    }
    
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
    }
    
    .btn-primary {
      background: var(--primary);
      color: white;
      width: 100%;
    }
    
    .btn-primary:hover {
      background: var(--primary-dark);
      transform: translateY(-1px);
    }
    
    .btn-primary:active {
      transform: translateY(0);
    }
    
    .btn-primary:disabled {
      background: var(--gray-300);
      cursor: not-allowed;
      transform: none;
    }
    
    .alert {
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      margin-bottom: 1rem;
      font-size: 0.875rem;
      display: none;
    }
    
    .alert.show {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .alert-error {
      background: #FEE2E2;
      color: var(--danger);
      border: 1px solid #FECACA;
    }
    
    .alert-success {
      background: #D1FAE5;
      color: var(--success);
      border: 1px solid #A7F3D0;
    }
    
    .login-footer {
      padding: 1rem 2rem 2rem;
      text-align: center;
      font-size: 0.75rem;
      color: var(--gray-500);
    }
    
    .login-footer a {
      color: var(--primary);
      text-decoration: none;
    }
    
    .login-footer a:hover {
      text-decoration: underline;
    }
    
    /* Spinner */
    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid transparent;
      border-top-color: currentColor;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Admin Dashboard Layout */
    .admin-layout {
      display: none;
      min-height: 100vh;
      background: var(--gray-100);
    }
    
    .admin-layout.active {
      display: flex;
    }
    
    /* Sidebar */
    .sidebar {
      width: 260px;
      background: white;
      border-right: 1px solid var(--gray-200);
      display: flex;
      flex-direction: column;
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      z-index: 100;
      transition: transform 0.3s;
    }
    
    .sidebar-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--gray-200);
      background: var(--primary);
      color: white;
    }
    
    .sidebar-header h1 {
      margin: 0;
      font-size: 1.125rem;
      font-weight: 700;
    }
    
    .sidebar-header p {
      margin: 0.25rem 0 0;
      font-size: 0.75rem;
      opacity: 0.8;
    }
    
    .sidebar-nav {
      flex: 1;
      padding: 1rem 0;
      overflow-y: auto;
    }
    
    .nav-section {
      padding: 0 1rem;
      margin-bottom: 1.5rem;
    }
    
    .nav-section-title {
      font-size: 0.625rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--gray-400);
      padding: 0.5rem 0.75rem;
      margin-bottom: 0.25rem;
    }
    
    .nav-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      border-radius: 0.5rem;
      color: var(--gray-600);
      text-decoration: none;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
    }
    
    .nav-item:hover {
      background: var(--gray-100);
      color: var(--gray-900);
    }
    
    .nav-item.active {
      background: var(--primary);
      color: white;
    }
    
    .nav-item svg {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
    }
    
    .nav-item .badge {
      margin-left: auto;
      background: var(--danger);
      color: white;
      font-size: 0.625rem;
      padding: 0.125rem 0.5rem;
      border-radius: 1rem;
      font-weight: 700;
    }
    
    .sidebar-footer {
      padding: 1rem;
      border-top: 1px solid var(--gray-200);
    }
    
    .user-info {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      background: var(--gray-50);
      border-radius: 0.5rem;
      margin-bottom: 0.75rem;
    }
    
    .user-avatar {
      width: 40px;
      height: 40px;
      background: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 1rem;
    }
    
    .user-details {
      flex: 1;
      min-width: 0;
    }
    
    .user-name {
      font-weight: 600;
      font-size: 0.875rem;
      color: var(--gray-800);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .user-role {
      font-size: 0.75rem;
      color: var(--gray-500);
    }
    
    .btn-logout {
      width: 100%;
      padding: 0.625rem;
      border: 1px solid var(--gray-300);
      border-radius: 0.5rem;
      background: white;
      color: var(--gray-600);
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: all 0.15s;
    }
    
    .btn-logout:hover {
      background: var(--gray-50);
      border-color: var(--danger);
      color: var(--danger);
    }
    
    /* Main Content */
    .main-content {
      flex: 1;
      margin-left: 260px;
      padding: 1.5rem;
      min-height: 100vh;
    }
    
    .content-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1.5rem;
    }
    
    .content-header h2 {
      margin: 0;
      font-size: 1.5rem;
      color: var(--gray-800);
    }
    
    /* Cards */
    .card {
      background: white;
      border-radius: 0.75rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }
    
    .card-header {
      padding: 1rem 1.5rem;
      border-bottom: 1px solid var(--gray-200);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .card-header h3 {
      margin: 0;
      font-size: 1rem;
      font-weight: 600;
      color: var(--gray-800);
    }
    
    .card-body {
      padding: 1.5rem;
    }
    
    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .stat-card {
      background: white;
      border-radius: 0.75rem;
      padding: 1.25rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .stat-card .stat-icon {
      width: 48px;
      height: 48px;
      border-radius: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1rem;
    }
    
    .stat-card .stat-icon svg {
      width: 24px;
      height: 24px;
    }
    
    .stat-card .stat-icon.blue { background: #DBEAFE; color: var(--primary); }
    .stat-card .stat-icon.green { background: #D1FAE5; color: var(--success); }
    .stat-card .stat-icon.yellow { background: #FEF3C7; color: var(--warning); }
    .stat-card .stat-icon.red { background: #FEE2E2; color: var(--danger); }
    
    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--gray-800);
      line-height: 1;
      margin-bottom: 0.25rem;
    }
    
    .stat-label {
      font-size: 0.875rem;
      color: var(--gray-500);
    }
    
    /* Table */
    .table-container {
      overflow-x: auto;
    }
    
    .data-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.875rem;
    }
    
    .data-table th {
      text-align: left;
      padding: 0.75rem 1rem;
      background: var(--gray-50);
      font-weight: 600;
      color: var(--gray-600);
      border-bottom: 1px solid var(--gray-200);
      white-space: nowrap;
    }
    
    .data-table td {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--gray-100);
      color: var(--gray-700);
    }
    
    .data-table tr:hover {
      background: var(--gray-50);
    }
    
    .data-table .truncate {
      max-width: 200px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    /* Status Badges */
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.25rem 0.625rem;
      border-radius: 1rem;
      font-size: 0.75rem;
      font-weight: 600;
    }
    
    .status-badge.publicado {
      background: #D1FAE5;
      color: #047857;
    }
    
    .status-badge.revision {
      background: #FEF3C7;
      color: #B45309;
    }
    
    .status-badge.oculto {
      background: #E5E7EB;
      color: #4B5563;
    }
    
    .status-badge.rechazado {
      background: #FEE2E2;
      color: #B91C1C;
    }
    
    /* Category Badges */
    .category-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      font-size: 0.75rem;
      font-weight: 500;
      background: var(--gray-100);
      color: var(--gray-700);
    }
    
    .category-badge.informacion { background: #DBEAFE; color: #1D4ED8; }
    .category-badge.acopio { background: #D1FAE5; color: #047857; }
    .category-badge.solicitud_ayuda { background: #FEE2E2; color: #B91C1C; }
    .category-badge.sos { background: #FEE2E2; color: #B91C1C; }
    
    /* Action Buttons */
    .btn-action {
      padding: 0.375rem 0.5rem;
      border: none;
      border-radius: 0.375rem;
      cursor: pointer;
      transition: all 0.15s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    
    .btn-action svg {
      width: 16px;
      height: 16px;
    }
    
    .btn-action.btn-view {
      background: var(--gray-100);
      color: var(--gray-600);
    }
    
    .btn-action.btn-view:hover {
      background: var(--gray-200);
    }
    
    .btn-action.btn-edit {
      background: #DBEAFE;
      color: var(--primary);
    }
    
    .btn-action.btn-edit:hover {
      background: #BFDBFE;
    }
    
    .btn-action.btn-verify {
      background: #D1FAE5;
      color: var(--success);
    }
    
    .btn-action.btn-verify:hover {
      background: #A7F3D0;
    }
    
    .btn-action.btn-delete {
      background: #FEE2E2;
      color: var(--danger);
    }
    
    .btn-action.btn-delete:hover {
      background: #FECACA;
    }
    
    .actions-cell {
      display: flex;
      gap: 0.5rem;
    }
    
    /* Filters */
    .filters-bar {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }
    
    .filter-select, .filter-input {
      padding: 0.5rem 0.75rem;
      border: 1px solid var(--gray-300);
      border-radius: 0.375rem;
      font-size: 0.875rem;
      background: white;
    }
    
    .filter-input {
      min-width: 200px;
    }
    
    /* Pagination */
    .pagination {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--gray-200);
    }
    
    .pagination-info {
      font-size: 0.875rem;
      color: var(--gray-600);
    }
    
    .pagination-buttons {
      display: flex;
      gap: 0.5rem;
    }
    
    .pagination-btn {
      padding: 0.5rem 0.75rem;
      border: 1px solid var(--gray-300);
      border-radius: 0.375rem;
      background: white;
      color: var(--gray-700);
      font-size: 0.875rem;
      cursor: pointer;
      transition: all 0.15s;
    }
    
    .pagination-btn:hover:not(:disabled) {
      background: var(--gray-50);
      border-color: var(--gray-400);
    }
    
    .pagination-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 200;
      padding: 1rem;
    }
    
    .modal-overlay.show {
      display: flex;
    }
    
    .modal {
      background: white;
      border-radius: 0.75rem;
      width: 100%;
      max-width: 600px;
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    
    .modal-header {
      padding: 1rem 1.5rem;
      border-bottom: 1px solid var(--gray-200);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .modal-header h3 {
      margin: 0;
      font-size: 1.125rem;
      font-weight: 600;
    }
    
    .modal-close {
      background: none;
      border: none;
      padding: 0.5rem;
      cursor: pointer;
      color: var(--gray-500);
      border-radius: 0.375rem;
    }
    
    .modal-close:hover {
      background: var(--gray-100);
      color: var(--gray-700);
    }
    
    .modal-body {
      padding: 1.5rem;
      overflow-y: auto;
      flex: 1;
    }
    
    .modal-footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--gray-200);
      display: flex;
      justify-content: flex-end;
      gap: 0.75rem;
    }
    
    .btn-secondary {
      background: var(--gray-100);
      color: var(--gray-700);
    }
    
    .btn-secondary:hover {
      background: var(--gray-200);
    }
    
    .btn-success {
      background: var(--success);
      color: white;
    }
    
    .btn-success:hover {
      background: #047857;
    }
    
    .btn-danger {
      background: var(--danger);
      color: white;
    }
    
    .btn-danger:hover {
      background: #B91C1C;
    }
    
    /* Form inside modal */
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }
    
    .form-group.full {
      grid-column: 1 / -1;
    }
    
    textarea.form-input {
      resize: vertical;
      min-height: 80px;
    }
    
    /* Loading State */
    .loading-overlay {
      position: absolute;
      inset: 0;
      background: rgba(255, 255, 255, 0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }
    
    .loading-overlay.show {
      display: flex;
    }
    
    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 3rem;
      color: var(--gray-500);
    }
    
    .empty-state svg {
      width: 64px;
      height: 64px;
      margin-bottom: 1rem;
      opacity: 0.5;
    }
    
    .empty-state p {
      margin: 0;
    }
    
    /* Mobile Sidebar Toggle */
    .mobile-menu-btn {
      display: none;
      position: fixed;
      top: 1rem;
      left: 1rem;
      z-index: 150;
      background: white;
      border: 1px solid var(--gray-200);
      border-radius: 0.5rem;
      padding: 0.75rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      cursor: pointer;
    }
    
    .mobile-menu-btn svg {
      width: 24px;
      height: 24px;
      color: var(--gray-700);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
      }
      
      .sidebar.open {
        transform: translateX(0);
      }
      
      .main-content {
        margin-left: 0;
      }
      
      .mobile-menu-btn {
        display: block;
      }
      
      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .form-row {
        grid-template-columns: 1fr;
      }
      
      .filters-bar {
        flex-direction: column;
      }
      
      .filter-input, .filter-select {
        width: 100%;
      }
    }
    
    /* View-specific styles */
    .view-section {
      display: none;
    }
    
    .view-section.active {
      display: block;
    }
    
    /* Quick Actions */
    .quick-actions {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }
    
    .quick-action-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s;
      border: 1px solid transparent;
    }
    
    .quick-action-btn svg {
      width: 18px;
      height: 18px;
    }
    
    .quick-action-btn.primary {
      background: var(--primary);
      color: white;
    }
    
    .quick-action-btn.primary:hover {
      background: var(--primary-dark);
    }
    
    /* Toast Notifications */
    .toast-container {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      z-index: 300;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .toast {
      background: white;
      border-radius: 0.5rem;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      padding: 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      min-width: 300px;
      animation: slideIn 0.3s ease;
    }
    
    .toast.success { border-left: 4px solid var(--success); }
    .toast.error { border-left: 4px solid var(--danger); }
    .toast.warning { border-left: 4px solid var(--warning); }
    
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    /* Form Sections */
    .form-section {
      background: var(--gray-50);
      border-radius: 0.5rem;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid var(--gray-200);
    }
    
    .form-section-title {
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--gray-700);
      margin: 0 0 1rem 0;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--gray-200);
    }
    
    .form-hint {
      font-size: 0.75rem;
      color: var(--gray-500);
      margin-top: 0.25rem;
    }
    
    /* Tags Container */
    .tags-container {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    
    .tag-checkbox {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.375rem 0.75rem;
      background: white;
      border: 1px solid var(--gray-300);
      border-radius: 1rem;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.15s;
    }
    
    .tag-checkbox:hover {
      border-color: var(--primary-light);
    }
    
    .tag-checkbox input:checked + span,
    .tag-checkbox:has(input:checked) {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    
    .tag-checkbox:has(input:checked) {
      background: #DBEAFE;
      border-color: var(--primary);
    }
    
    .tag-checkbox input {
      width: 14px;
      height: 14px;
    }
    
    /* Checkbox Label */
    .checkbox-label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      font-size: 0.875rem;
      color: var(--gray-700);
    }
    
    .checkbox-label input {
      width: 18px;
      height: 18px;
    }
    
    /* Password Display */
    .password-display {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem;
      background: var(--gray-100);
      border-radius: 0.5rem;
      font-family: monospace;
      font-size: 1rem;
    }
    
    .password-display span {
      flex: 1;
    }
    
    .btn-copy {
      background: white;
      border: 1px solid var(--gray-300);
      border-radius: 0.375rem;
      padding: 0.375rem;
      cursor: pointer;
      transition: all 0.15s;
    }
    
    .btn-copy:hover {
      background: var(--gray-100);
    }
    
    /* Alert Warning */
    .alert-warning {
      background: #FEF3C7;
      color: #92400E;
      border: 1px solid #FCD34D;
    }
    
    /* Category badges ajustados */
    .category-badge.albergue { background: #DBEAFE; color: #1D4ED8; }
    .category-badge.hidratacion { background: #CFFAFE; color: #0E7490; }
    
    /* Status badges ajustados para nuevos estados */
    .status-badge.activo { background: #D1FAE5; color: #047857; }
    .status-badge.pendiente { background: #FEF3C7; color: #D97706; }
    .status-badge.inactivo { background: #E5E7EB; color: #4B5563; }
    .status-badge.cerrado { background: #FEE2E2; color: #B91C1C; }
    
    /* Bot√≥n crear usuario */
    .btn-create-user {
      background: var(--success);
      color: white;
      border: none;
    }
    
    .btn-create-user:hover {
      background: #047857;
    }
    
    /* Leaflet map inside modal */
    #edit-map {
      z-index: 0;
    }
    
    #edit-map .leaflet-control-container {
      z-index: 100;
    }
  </style>
  
  <!-- Leaflet CSS para mapa en modal -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
  <!-- LOGIN SECTION -->
  <div id="login-section" class="login-container">
    <div class="login-card">
      <div class="login-header">
        <div class="login-logo">
          <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="45" fill="#1E40AF"/>
            <path d="M50 20C38.954 20 30 28.954 30 40C30 55 50 75 50 75C50 75 70 55 70 40C70 28.954 61.046 20 50 20ZM50 48C45.582 48 42 44.418 42 40C42 35.582 45.582 32 50 32C54.418 32 58 35.582 58 40C58 44.418 54.418 48 50 48Z" fill="white"/>
          </svg>
        </div>
        <h1>Donde Ayudo CL</h1>
        <p>Panel de Administraci√≥n</p>
      </div>
      
      <form id="login-form" class="login-form">
        <div id="login-alert" class="alert alert-error">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/>
          </svg>
          <span id="login-alert-text">Error</span>
        </div>
        
        <div class="form-group">
          <label for="email">Correo electr√≥nico</label>
          <input type="email" id="email" name="email" class="form-input" placeholder="tu@email.com" required>
        </div>
        
        <div class="form-group">
          <label for="password">Contrase√±a</label>
          <input type="password" id="password" name="password" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
        </div>
        
        <button type="submit" id="login-btn" class="btn btn-primary">
          <span id="login-btn-text">Iniciar Sesi√≥n</span>
          <div id="login-spinner" class="spinner" style="display: none;"></div>
        </button>
      </form>
      
      <div class="login-footer">
        <p>¬øOlvidaste tu contrase√±a? <a href="#" id="forgot-password">Recuperar</a></p>
        <p style="margin-top: 0.5rem;"><a href="/">‚Üê Volver al mapa</a></p>
      </div>
    </div>
  </div>

  <!-- ADMIN DASHBOARD -->
  <div id="admin-layout" class="admin-layout">
    <!-- Mobile Menu Button -->
    <button id="mobile-menu-btn" class="mobile-menu-btn">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/>
      </svg>
    </button>
    
    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar">
      <div class="sidebar-header">
        <h1>üó∫Ô∏è Donde Ayudo</h1>
        <p>Panel de Administraci√≥n</p>
      </div>
      
      <nav class="sidebar-nav">
        <div class="nav-section">
          <div class="nav-section-title">Principal</div>
          <button class="nav-item active" data-view="dashboard">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/>
            </svg>
            Dashboard
          </button>
          <button class="nav-item" data-view="puntos">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/>
            </svg>
            Puntos
          </button>
          <button class="nav-item" data-view="solicitudes">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>
            </svg>
            Bandeja de Entrada
            <span id="solicitudes-badge" class="badge" style="display: none;">0</span>
          </button>
        </div>
        
        <div class="nav-section" id="admin-section" style="display: none;">
          <div class="nav-section-title">Administraci√≥n</div>
          <button class="nav-item" data-view="usuarios">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
            Usuarios
          </button>
        </div>
        
        <div class="nav-section">
          <div class="nav-section-title">Enlaces</div>
          <a href="/" class="nav-item" target="_blank">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/>
            </svg>
            Ver Mapa P√∫blico
          </a>
        </div>
      </nav>
      
      <div class="sidebar-footer">
        <div class="user-info">
          <div class="user-avatar" id="user-avatar">?</div>
          <div class="user-details">
            <div class="user-name" id="user-name">Usuario</div>
            <div class="user-role" id="user-role">Cargando...</div>
          </div>
        </div>
        <button id="btn-logout" class="btn-logout">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/>
          </svg>
          Cerrar Sesi√≥n
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Dashboard View -->
      <section id="view-dashboard" class="view-section active">
        <div class="content-header">
          <h2>Dashboard</h2>
          <div class="quick-actions">
            <button class="quick-action-btn primary" id="btn-add-punto">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/>
              </svg>
              Agregar Punto
            </button>
          </div>
        </div>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon blue">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/>
              </svg>
            </div>
            <div class="stat-value" id="stat-total">-</div>
            <div class="stat-label">Puntos Totales</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon green">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>
              </svg>
            </div>
            <div class="stat-value" id="stat-publicados">-</div>
            <div class="stat-label">Publicados</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon yellow">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/>
              </svg>
            </div>
            <div class="stat-value" id="stat-revision">-</div>
            <div class="stat-label">En Revisi√≥n</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon red">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/>
              </svg>
            </div>
            <div class="stat-value" id="stat-solicitudes">-</div>
            <div class="stat-label">Solicitudes Pendientes</div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3>√öltimos Puntos en Revisi√≥n</h3>
          </div>
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Ciudad</th>
                  <th>Categor√≠a</th>
                  <th>Estado</th>
                  <th>Fecha</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="recent-puntos-table">
                <tr>
                  <td colspan="6" class="empty-state">
                    <p>Cargando...</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>
      
      <!-- Puntos View -->
      <section id="view-puntos" class="view-section">
        <div class="content-header">
          <h2>Gesti√≥n de Puntos</h2>
          <div class="quick-actions">
            <button class="quick-action-btn primary" id="btn-add-punto-2">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/>
              </svg>
              Agregar Punto
            </button>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3>Todos los Puntos</h3>
          </div>
          <div class="card-body">
            <div class="filters-bar">
              <select id="filter-estado" class="filter-select">
                <option value="">Todos los estados</option>
                <option value="publicado">Publicado</option>
                <option value="revision">En Revisi√≥n</option>
                <option value="oculto">Oculto</option>
                <option value="rechazado">Rechazado</option>
              </select>
              <select id="filter-categoria" class="filter-select">
                <option value="">Todas las categor√≠as</option>
                <option value="informacion">Informaci√≥n</option>
                <option value="acopio">Acopio</option>
                <option value="solicitud_ayuda">Solicitud de Ayuda</option>
                <option value="sos">SOS</option>
              </select>
              <input type="text" id="filter-search" class="filter-input" placeholder="Buscar por nombre, ciudad...">
            </div>
          </div>
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Ciudad</th>
                  <th>Categor√≠a</th>
                  <th>Estado</th>
                  <th>Verificador</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="puntos-table">
                <tr>
                  <td colspan="6" class="empty-state">
                    <p>Cargando...</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="pagination">
            <div class="pagination-info" id="puntos-pagination-info">Mostrando 0 de 0</div>
            <div class="pagination-buttons">
              <button class="pagination-btn" id="puntos-prev" disabled>Anterior</button>
              <button class="pagination-btn" id="puntos-next" disabled>Siguiente</button>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Solicitudes View -->
      <section id="view-solicitudes" class="view-section">
        <div class="content-header">
          <h2>Bandeja de Entrada</h2>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3>Solicitudes Externas Pendientes</h3>
          </div>
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Origen</th>
                  <th>Datos</th>
                  <th>Fecha</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="solicitudes-table">
                <tr>
                  <td colspan="4" class="empty-state">
                    <p>No hay solicitudes pendientes</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>
      
      <!-- Usuarios View (Solo superadmin) -->
      <section id="view-usuarios" class="view-section">
        <div class="content-header">
          <h2>Gesti√≥n de Usuarios</h2>
          <div class="quick-actions">
            <button class="quick-action-btn primary" id="btn-create-user">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="8.5" cy="7" r="4"/><line x1="20" y1="8" x2="20" y2="14"/><line x1="23" y1="11" x2="17" y2="11"/>
              </svg>
              Crear Usuario
            </button>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3>Usuarios del Sistema</h3>
          </div>
          <div class="card-body">
            <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: 1rem;">
              Crea usuarios con contrase√±as temporales. Los usuarios deber√°n cambiar su contrase√±a en el primer inicio de sesi√≥n.
            </p>
          </div>
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Email</th>
                  <th>Organizaci√≥n</th>
                  <th>Rol</th>
                  <th>Estado</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="usuarios-table">
                <tr>
                  <td colspan="6" class="empty-state">
                    <p>Cargando...</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Edit Point Modal -->
  <div id="modal-edit" class="modal-overlay">
    <div class="modal" style="max-width: 900px; max-height: 95vh;">
      <div class="modal-header">
        <h3 id="modal-title">Editar Punto</h3>
        <button class="modal-close" id="modal-close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <form id="edit-form">
        <div class="modal-body" style="max-height: calc(95vh - 140px); overflow-y: auto;">
          <input type="hidden" id="edit-id">
          
          <!-- Secci√≥n: Informaci√≥n B√°sica -->
          <div class="form-section">
            <h4 class="form-section-title">üìç Informaci√≥n B√°sica</h4>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-nombre">Nombre del lugar *</label>
                <input type="text" id="edit-nombre" class="form-input" required placeholder="Ej: Centro de Acopio Municipal">
              </div>
              <div class="form-group">
                <label for="edit-ciudad">Comuna / Ciudad</label>
                <input type="text" id="edit-ciudad" class="form-input" placeholder="Ej: Vi√±a del Mar">
              </div>
            </div>
            
            <div class="form-group full">
              <label for="edit-direccion">Direcci√≥n</label>
              <input type="text" id="edit-direccion" class="form-input" placeholder="Ej: Av. Libertad 1234">
            </div>
          </div>

          <!-- Secci√≥n: Ubicaci√≥n con Mapa -->
          <div class="form-section">
            <h4 class="form-section-title">üó∫Ô∏è Ubicaci√≥n</h4>
            <p class="form-hint">Haz clic en el mapa para seleccionar la ubicaci√≥n o ingresa las coordenadas manualmente.</p>
            
            <div id="edit-map" style="height: 250px; border-radius: 8px; margin-bottom: 1rem; border: 2px solid var(--gray-200);"></div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-latitud">Latitud *</label>
                <input type="number" step="any" id="edit-latitud" class="form-input" required placeholder="-33.0472">
              </div>
              <div class="form-group">
                <label for="edit-longitud">Longitud *</label>
                <input type="number" step="any" id="edit-longitud" class="form-input" required placeholder="-71.6127">
              </div>
              <div class="form-group" style="flex: 0 0 auto;">
                <label>&nbsp;</label>
                <button type="button" id="btn-use-my-location" class="btn btn-secondary" style="white-space: nowrap;">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                  Mi ubicaci√≥n
                </button>
              </div>
            </div>
          </div>
          
          <!-- Secci√≥n: Clasificaci√≥n -->
          <div class="form-section">
            <h4 class="form-section-title">üè∑Ô∏è Clasificaci√≥n</h4>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-categoria">Categor√≠a *</label>
                <select id="edit-categoria" class="form-input" required>
                  <option value="">Seleccionar categor√≠a...</option>
                  <option value="acopio">üè™ Centro de Acopio</option>
                  <option value="albergue">üè† Albergue</option>
                  <option value="hidratacion">üíß Punto de Hidrataci√≥n</option>
                  <option value="sos">üÜò SOS / Zona Afectada</option>
                </select>
              </div>
              <div class="form-group">
                <label for="edit-subtipo">Subtipo</label>
                <select id="edit-subtipo" class="form-input">
                  <option value="">Sin subtipo espec√≠fico</option>
                  <option value="veterinaria">üêæ Atenci√≥n Veterinaria</option>
                  <option value="rescate">üö® Rescate</option>
                  <option value="salud">üè• Atenci√≥n de Salud</option>
                  <option value="psicosocial">üíö Atenci√≥n Psicosocial</option>
                  <option value="comedor">üç≤ Comedor Solidario</option>
                  <option value="infancias">üë∂ Para Infancias</option>
                  <option value="ropa">üëï Ropa y Abrigo</option>
                  <option value="otros">üì¶ Otros</option>
                </select>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-estado">Estado *</label>
                <select id="edit-estado" class="form-input" required>
                  <option value="activo">‚úÖ Activo</option>
                  <option value="pendiente">‚è≥ Pendiente de revisi√≥n</option>
                  <option value="inactivo">‚ö†Ô∏è Temporalmente inactivo</option>
                  <option value="cerrado">‚ùå Cerrado permanentemente</option>
                </select>
              </div>
              <div class="form-group">
                <label for="edit-capacidad-estado">Estado de capacidad</label>
                <select id="edit-capacidad-estado" class="form-input">
                  <option value="">No aplica</option>
                  <option value="abierto">üü¢ Abierto - Recibiendo</option>
                  <option value="por_llenar">üü° Por llenarse</option>
                  <option value="colapsado">üî¥ Colapsado</option>
                  <option value="cerrado">‚ö´ Cerrado</option>
                </select>
              </div>
            </div>
          </div>
          
          <!-- Secci√≥n: Contacto -->
          <div class="form-section">
            <h4 class="form-section-title">üìû Contacto</h4>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-contacto-nombre">Nombre de contacto</label>
                <input type="text" id="edit-contacto-nombre" class="form-input" placeholder="Ej: Juan P√©rez">
              </div>
              <div class="form-group">
                <label for="edit-contacto">Tel√©fono / Email</label>
                <input type="text" id="edit-contacto" class="form-input" placeholder="+56 9 1234 5678">
              </div>
            </div>
            
            <div class="form-group full">
              <label for="edit-horario">Horario de atenci√≥n</label>
              <input type="text" id="edit-horario" class="form-input" placeholder="Ej: Lunes a Viernes 9:00 - 18:00, S√°bados 10:00 - 14:00">
            </div>
          </div>
          
          <!-- Secci√≥n: Necesidades (visible seg√∫n categor√≠a) -->
          <div class="form-section" id="section-necesidades">
            <h4 class="form-section-title">üìã Necesidades</h4>
            
            <div class="form-group full">
              <label for="edit-necesidades">Descripci√≥n de necesidades</label>
              <textarea id="edit-necesidades" class="form-input" rows="3" placeholder="Describe qu√© se necesita o qu√© tipo de ayuda se ofrece"></textarea>
            </div>
            
            <div class="form-group full">
              <label>Etiquetas de necesidades</label>
              <p class="form-hint">Selecciona las necesidades principales (opcional)</p>
              <div class="tags-container" id="necesidades-tags">
                <label class="tag-checkbox"><input type="checkbox" value="agua"> üíß Agua</label>
                <label class="tag-checkbox"><input type="checkbox" value="alimentos"> üçû Alimentos</label>
                <label class="tag-checkbox"><input type="checkbox" value="ropa"> üëï Ropa</label>
                <label class="tag-checkbox"><input type="checkbox" value="medicamentos"> üíä Medicamentos</label>
                <label class="tag-checkbox"><input type="checkbox" value="higiene"> üßº Art√≠culos de higiene</label>
                <label class="tag-checkbox"><input type="checkbox" value="pa√±ales"> üë∂ Pa√±ales</label>
                <label class="tag-checkbox"><input type="checkbox" value="frazadas"> üõèÔ∏è Frazadas</label>
                <label class="tag-checkbox"><input type="checkbox" value="herramientas"> üîß Herramientas</label>
                <label class="tag-checkbox"><input type="checkbox" value="voluntarios"> üôã Voluntarios</label>
              </div>
            </div>
          </div>
          
          <!-- Secci√≥n: Datos SOS / Zona Afectada (solo para categor√≠a SOS) -->
          <div class="form-section" id="section-sos" style="display: none;">
            <h4 class="form-section-title">üÜò Datos de Zona Afectada</h4>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-nombre-zona">Nombre del sector</label>
                <input type="text" id="edit-nombre-zona" class="form-input" placeholder="Ej: Sector Cancha">
              </div>
              <div class="form-group">
                <label for="edit-urgencia">Nivel de urgencia</label>
                <select id="edit-urgencia" class="form-input">
                  <option value="">Sin especificar</option>
                  <option value="critica">üî¥ Cr√≠tica</option>
                  <option value="alta">üü† Alta</option>
                  <option value="media">üü° Media</option>
                  <option value="baja">üü¢ Baja</option>
                </select>
              </div>
            </div>
            
            <div class="form-group full">
              <label class="checkbox-label">
                <input type="checkbox" id="edit-habitado">
                <span>Zona actualmente habitada</span>
              </label>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-cantidad-ninos">Cantidad de ni√±os</label>
                <input type="number" id="edit-cantidad-ninos" class="form-input" min="0" value="0">
              </div>
              <div class="form-group">
                <label for="edit-cantidad-adultos">Cantidad de adultos</label>
                <input type="number" id="edit-cantidad-adultos" class="form-input" min="0" value="0">
              </div>
              <div class="form-group">
                <label for="edit-cantidad-ancianos">Cantidad de adultos mayores</label>
                <input type="number" id="edit-cantidad-ancianos" class="form-input" min="0" value="0">
              </div>
            </div>
            
            <div class="form-group full">
              <label for="edit-animales">Animales en el lugar</label>
              <input type="text" id="edit-animales" class="form-input" placeholder="Ej: 2 perros, 3 gatos">
            </div>
            
            <div class="form-group full">
              <label class="checkbox-label">
                <input type="checkbox" id="edit-riesgo-asbesto">
                <span>‚ö†Ô∏è Hay riesgo de asbesto en la zona</span>
              </label>
            </div>
            
            <div class="form-group full">
              <label class="checkbox-label">
                <input type="checkbox" id="edit-requiere-voluntarios">
                <span>üôã Se requieren voluntarios</span>
              </label>
            </div>
            
            <div class="form-group full">
              <label for="edit-logistica">Instrucciones de llegada / Log√≠stica</label>
              <textarea id="edit-logistica" class="form-input" rows="2" placeholder="C√≥mo llegar, qu√© ruta tomar, puntos de referencia..."></textarea>
            </div>
          </div>
          
          <!-- Secci√≥n: Verificaci√≥n y Notas (solo visible para admins) -->
          <div class="form-section">
            <h4 class="form-section-title">‚úÖ Verificaci√≥n</h4>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-entidad-verificadora">Entidad verificadora</label>
                <input type="text" id="edit-entidad-verificadora" class="form-input" readonly placeholder="Se asigna autom√°ticamente">
                <p class="form-hint">Se asigna autom√°ticamente seg√∫n tu organizaci√≥n</p>
              </div>
              <div class="form-group">
                <label for="edit-fecha-verificacion">Fecha de verificaci√≥n</label>
                <input type="text" id="edit-fecha-verificacion" class="form-input" readonly>
              </div>
            </div>
            
            <div class="form-group full">
              <label for="edit-notas">Notas internas (solo visible para administradores)</label>
              <textarea id="edit-notas" class="form-input" rows="2" placeholder="Notas privadas sobre este punto"></textarea>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="modal-cancel">Cancelar</button>
          <button type="submit" class="btn btn-primary">Guardar Cambios</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Modal para crear usuarios con clave temporal -->
  <div id="modal-create-user" class="modal-overlay">
    <div class="modal" style="max-width: 500px;">
      <div class="modal-header">
        <h3>Crear Nuevo Usuario</h3>
        <button class="modal-close" id="modal-user-close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <form id="create-user-form">
        <div class="modal-body">
          <div class="form-group">
            <label for="new-user-email">Email *</label>
            <input type="email" id="new-user-email" class="form-input" required placeholder="usuario@ejemplo.com">
          </div>
          
          <div class="form-group">
            <label for="new-user-name">Nombre completo *</label>
            <input type="text" id="new-user-name" class="form-input" required placeholder="Juan P√©rez">
          </div>
          
          <div class="form-group">
            <label for="new-user-organizacion">Organizaci√≥n</label>
            <input type="text" id="new-user-organizacion" class="form-input" placeholder="Ej: Cruz Roja, Municipalidad...">
          </div>
          
          <div class="form-group">
            <label for="new-user-rol">Rol *</label>
            <select id="new-user-rol" class="form-input" required>
              <option value="">Seleccionar rol...</option>
              <option value="verificador">Verificador</option>
              <option value="admin">Administrador</option>
              <option value="superadmin">Super Administrador</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Contrase√±a temporal</label>
            <div class="password-display" id="temp-password-display">
              <span id="temp-password-text">Se generar√° al crear</span>
              <button type="button" id="btn-copy-password" class="btn-copy" title="Copiar contrase√±a" style="display: none;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
              </button>
            </div>
            <p class="form-hint">El usuario deber√° cambiar esta contrase√±a en su primer inicio de sesi√≥n.</p>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="modal-user-cancel">Cancelar</button>
          <button type="submit" class="btn btn-primary">Crear Usuario</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Modal para cambio de contrase√±a obligatorio -->
  <div id="modal-change-password" class="modal-overlay">
    <div class="modal" style="max-width: 450px;">
      <div class="modal-header" style="background: var(--warning); color: white;">
        <h3>üîê Cambio de Contrase√±a Requerido</h3>
      </div>
      <form id="change-password-form">
        <div class="modal-body">
          <div class="alert alert-warning show" style="margin-bottom: 1rem;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
            <span>Por seguridad, debes cambiar tu contrase√±a temporal antes de continuar.</span>
          </div>
          
          <div class="form-group">
            <label for="new-password">Nueva contrase√±a *</label>
            <input type="password" id="new-password" class="form-input" required minlength="8" placeholder="M√≠nimo 8 caracteres">
          </div>
          
          <div class="form-group">
            <label for="confirm-password">Confirmar contrase√±a *</label>
            <input type="password" id="confirm-password" class="form-input" required placeholder="Repite la contrase√±a">
          </div>
          
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="keep-temp-password">
              <span>Mantener la contrase√±a temporal (no recomendado)</span>
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary" style="width: 100%;">Cambiar Contrase√±a</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- View Point Modal -->
  <div id="modal-view" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <h3>Detalle del Punto</h3>
        <button class="modal-close" id="modal-view-close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="modal-body" id="modal-view-content">
        <!-- Content loaded dynamically -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="modal-view-cancel">Cerrar</button>
        <button type="button" class="btn btn-primary" id="modal-view-edit">Editar</button>
      </div>
    </div>
  </div>
  
  <!-- Confirm Modal -->
  <div id="modal-confirm" class="modal-overlay">
    <div class="modal" style="max-width: 400px;">
      <div class="modal-header">
        <h3 id="confirm-title">Confirmar</h3>
        <button class="modal-close" id="confirm-close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <p id="confirm-message">¬øEst√°s seguro?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="confirm-cancel">Cancelar</button>
        <button type="button" class="btn btn-danger" id="confirm-ok">Confirmar</button>
      </div>
    </div>
  </div>
  
  <!-- Toast Container -->
  <div id="toast-container" class="toast-container"></div>

  <script type="module" src="/src/admin.js"></script>
</body>
</html>
